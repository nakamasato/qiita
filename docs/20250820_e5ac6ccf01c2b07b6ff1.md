---
title: ユーザ認証・組織管理の実装を簡単にできるClerkの検討
tags: Clerk
author: nakamasato
slide: false
---
## Clerk Auth

### Features

#### 認証方法
- **ソーシャル認証 (OAuth)**: Google、GitHub、Twitter、Discord等の主要プロバイダー対応
    - use custom credentialsで Google scopeを指定することも可能
- **エンタープライズSSO**: SAML、OIDC対応
- **Web3認証**: Coinbase Wallet、MetaMask、OKX Wallet対応
- **メール/パスワード認証**: マジックリンク、パスワードベース認証
- **電話番号認証**: SMS認証対応
- **多要素認証 (MFA)**: セキュリティ強化オプション

#### 開発者向け機能
- **プリビルトコンポーネント**: SignIn、SignUp、UserButton、UserProfile等の即座に使えるUIコンポーネント (https://clerk.com/docs/components/overview)
- **カスタム認証フロー**: 独自の認証画面を構築可能
- **マルチプラットフォーム対応**: React、Next.js、Vue、Angular、Node.js等に対応
- **セッション管理**: 自動的なトークン更新と検証
- **Webhook対応**: ユーザーイベントの通知

#### 組織管理機能 (Organizations)
- **組織の作成・管理**: ユーザーが複数の組織に所属可能
- **役割とパーミッション**: カスタマイズ可能な権限システム
- **招待システム**: メール招待、招待リンク機能
- **組織切り替えUI**: OrganizationSwitcherコンポーネント
- **ドメイン検証**: 特定ドメインのメールアドレスを自動的に組織に追加
- **組織レベルのSSO**: 各組織で独自のSSO設定が可能

##### 組織管理コンポーネント
- `CreateOrganization`: 組織作成UI
- `OrganizationProfile`: 組織プロフィール管理
- `OrganizationList`: 所属組織一覧
- `OrganizationSwitcher`: 組織切り替えUI

### Pricing

#### Free Plan
- **MAU（月間アクティブユーザー）**: 10,000人まで無料
- **MAO（月間アクティブ組織）**: 100組織まで無料
- **ダッシュボードシート**: 3席
- **組織メンバー上限**: 5人/組織
- **基本認証機能**: 全て利用可能
- **カスタムドメイン**: 利用可能

#### Pro Plan（$25/月〜）
- **MAU**: 最初の10,000人は無料、追加は$0.02/ユーザー
- **MAO**: 最初の100組織は無料、追加は$1/組織
- **組織メンバー**: 無制限
- **Clerkブランディング削除**: 可能
- **無制限のソーシャル接続**: 利用可能

#### アドオン
- **Enhanced Authentication（$100/月）**: MFA、デバイストラッキング、エンタープライズSSO
- **Enhanced Administration（$100/月）**: ユーザー偽装、カスタムダッシュボールロール、監査ログ

### Pros

- **開発工数の大幅削減**: 認証システムの実装が不要
- **組織管理機能**: B2B SaaSに必要な組織・権限管理が標準搭載
- **セキュリティ**: エンタープライズグレードの認証機能が即座に利用可能
- **柔軟な認証戦略**: 様々な認証方法を簡単に組み合わせ可能
- **優れたDX**: 充実したドキュメントとSDK、プリビルトコンポーネント
- **"First Day Free"**: 24時間以内に再訪しないユーザーは課金対象外

### Cons

- **Free Planの制限**: 組織あたり5メンバーまで、100組織まで
- **料金体系**: ユーザー数が増えると従量課金でコストが増加 (10000ユーザ以降$0.02/ユーザー、100組織以降$1/組織なのでここもかなり安い)
- **ベンダーロックイン**: 認証システムの移行は困難
- **カスタマイゼーション制限**: 高度なカスタマイズには制約がある場合も

## Clerk Billing (Beta)

Clerk Billingの詳細に関してはこちらもご参照ください。

https://qiita.com/nakamasato/items/197655803d29d5b3df91

### Features

#### 基本機能
- **サブスクリプション管理**: 定期購読プランの作成・管理
- **Stripe統合**: Stripeアカウントとのシームレスな連携
- **B2C/B2B対応**: 個人向け・企業向け両方のビジネスモデルに対応
- **決済フロー**: チェックアウトページと決済処理の実装を簡素化

#### 料金体系
- **追加手数料**: Stripe手数料に加えて、決済額の0.7%を追加徴収
- **環境別課金**: 本番環境のみで追加手数料が発生（開発環境は無料）
- **前払い不要**: 決済が発生してから手数料が発生

### Pros

- **実装工数の劇的削減**: 決済システムの複雑な実装が不要
- **ユーザー管理との統合**: ClerkのユーザーとStripeの顧客を自動同期
- **初期コスト不要**: 売上が発生してから手数料を支払う仕組み
- **開発環境無料**: テスト・開発環境では追加手数料なし
- **小規模チーム向け**: 個人開発者や小規模チームに最適

### Cons

- **Beta版のリスク**: APIの破壊的変更の可能性（SDKのバージョン固定推奨）
- **追加手数料**: Stripe手数料（2.9% + $0.30）に加えて0.7%の手数料
- **ベンダーロックイン**: ClerkとStripeの両方に依存
- **機能制限**: Beta版のため、一部の高度な機能が未実装の可能性
- **価格転嫁の必要性**: 追加手数料分をサービス価格に反映する必要

## 総合評価

### ✅️Clerkが向いているケース
- B2B/B2C SaaSを構築する場合（組織管理機能が必須）
- 開発リソースが限られている小規模チーム
- 認証・決済システムの実装より、コア機能の開発に注力したい
- MAUが10,000人以下の初期段階のサービス

### ❌️注意すべき点
- スケール時のコスト増加を事前に計算
- Beta機能（Billing）の利用は慎重に検討
- ベンダーロックインのリスクを理解した上で採用

## Appendix

### SSO Google Custom Credentials

![Screenshot 2025-08-21 at 11.36.43.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/7059/08816da9-2ec1-4510-ab4f-7ed8238d817c.png)



## References

- [Clerk Authentication Overview](https://clerk.com/docs/authentication/overview)
- [Clerk Organizations Overview](https://clerk.com/docs/organizations/overview)
- [Clerk Billing Overview (Beta)](https://clerk.com/docs/raw/billing/overview.mdx)
- [Clerk Pricing](https://clerk.com/pricing)
- [Clerk Billing](https://clerk.com/billing)

