---
title: PlaywrightをGitHub ActionsでCacheしてインストールの時間を短縮する
tags: Playwright GitHubActions
author: nakamasato
slide: false
---
## 課題

毎回 `npx playwright install --with-deps chromium` でインストールすると2分ほどかかるので、キャッシュしたい。

## 設定

```yaml
      - name: Cache Playwright Browsers
        uses: actions/cache@v4
        id: playwright-cache
        with:
          path: |
            ~/.cache/ms-playwright
          key: ${{ runner.os }}-playwright-chromium
          restore-keys: |
            ${{ runner.os }}-playwright-chromium

      - name: Install Playwright Browsers
        if: steps.playwright-cache.outputs.cache-hit != 'true'
        working-directory: e2e
        run: npx playwright install --with-deps chromium
```

browserは ~/.cache/ms-playwright 以下に格納されるのでこれをactions/cacheでcacheする。

## 結果

### Cacheなし

![Screenshot 2025-09-09 at 11.22.45.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/7059/1fd6f760-3640-41e2-9e30-5aa3a854ad48.png)

### Cacheあり

![Screenshot 2025-09-09 at 11.21.14.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/7059/e1ff5a7b-3d0d-4c8c-9421-588a21d1686d.png)

## Ref

- https://playwright.dev/docs/browsers#managing-browser-binaries
- https://playwright.dev/docs/ci-intro#setting-up-github-actions

