---
title: Claude Code Ã— Local LLM é€£æºãƒ¡ãƒ¢
tags: ClaudeCode ollama LocalLLM
author: nakamasato
slide: false
---
## ã¯ã˜ã‚ã«

Claude Codeã¯ã€Anthropicç¤¾ãŒé–‹ç™ºã—ãŸã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§å‹•ä½œã™ã‚‹AIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚é€šå¸¸ã¯Anthropicã®Claudeãƒ¢ãƒ‡ãƒ«ã®ã¿ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€`claude-bridge`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Ollamaãªã©ã®ãƒ­ãƒ¼ã‚«ãƒ«LLMã¨é€£æºã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€`@mariozechner/claude-bridge`ã‚’ä½¿ã£ã¦Claude Codeã¨Ollamaã®ãƒ­ãƒ¼ã‚«ãƒ«LLMã‚’é€£æºã•ã›ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

## å¿…è¦ãªç’°å¢ƒ

- Node.js
- npm
- macOSã€Linuxã€ã¾ãŸã¯Windowsï¼ˆä»Šå›ã¯MacOSï¼‰

## 1. Ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨èµ·å‹•

### Ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰Ollamaã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

**macOS:**
```bash
brew install --cask ollama
```

**Linux:**
```bash
curl -fsSL https://ollama.com/install.sh | sh
```

**Windows:**
å…¬å¼ã‚µã‚¤ãƒˆï¼ˆhttps://ollama.com/downloadï¼‰ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œ

### Ollamaã®èµ·å‹•

```bash
ollama serve
```

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ `http://localhost:11434` ã§APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã€‚

### ãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

ä»Šå›ã¯è»½é‡ã§ã‚ã‚ŠãªãŒã‚‰é«˜æ€§èƒ½ãª`qwen3:1.7b`ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
ollama pull qwen3:1.7b
```

ãƒ¢ãƒ‡ãƒ«ã®å‹•ä½œç¢ºèªï¼š
```bash
ollama run qwen3:1.7b
```

## 2. claude-bridgeã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install -g @mariozechner/claude-bridge
```

## 3. claude-bridgeã®èµ·å‹•

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§claude-bridgeã‚’èµ·å‹•ã—ã¾ã™ï¼š

```bash
OPENAI_API_KEY=dummy claude-bridge openai qwen3:1.7b --baseURL http://localhost:11434/v1
```

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ï¼š
- `OPENAI_API_KEY=dummy`: OpenAI APIå½¢å¼ã§ã®é€šä¿¡ã®ãŸã‚ã€ãƒ€ãƒŸãƒ¼ã®APIã‚­ãƒ¼ã‚’è¨­å®š
- `openai`: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å½¢å¼ã‚’æŒ‡å®šï¼ˆOpenAIäº’æ›APIã¨ã—ã¦å‹•ä½œï¼‰
- `qwen3:1.7b`: ä½¿ç”¨ã™ã‚‹Ollamaãƒ¢ãƒ‡ãƒ«å
- `--baseURL http://localhost:11434/v1`: Ollamaã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

## 4. å‹•ä½œç¢ºèª

### åŸºæœ¬çš„ãªè³ªå•

```
> æ—¥æœ¬ã®é¦–éƒ½ã¯ã©ã“ã§ã™ã‹

âº Tokyo is the capital city of Japan. It is located in the country of Japan.
```

ã‚·ãƒ³ãƒ—ãƒ«ãªè³ªå•ã«å¯¾ã—ã¦ã€é©åˆ‡ãªå›ç­”ãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚

ã€Œã‚¢ãƒ¡ãƒªã‚«ã®é¦–éƒ½ã¯ã€ã¨åŠ¹ã„ã¦ã¿ã‚‹ã¨ãªãœã‹WebSearchãŒä½¿ã‚ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚

```
> ã‚¢ãƒ¡ãƒªã‚«ã®é¦–éƒ½ã¯

âº The tools include WebSearch, which allows searching the web and returning results. Since the user is asking
  for geographical information, WebSearch seems appropriate. The parameters for WebSearch require a query,
  allowed_domains, and blocked_domains. The query here is "ã‚¢ãƒ¡ãƒªã‚«ã®é¦–éƒ½ã¯", so I'll use that. The
  allowed_domains might not be necessary if the search is general, but maybe including the domain could help.
  However, since the user didn't specify any particular domains, I'll just use the query. The blocked_domains
  are also not needed here. So I'll call WebSearch with the query "ã‚¢ãƒ¡ãƒªã‚«ã®é¦–éƒ½ã¯".

âº Web Search("ã‚¢ãƒ¡ãƒªã‚«ã®é¦–éƒ½ã¯")
  â¿  Error: Cannot specify both allowed_domains and blocked_domains in the same request
```

ã“ã®ä¾‹ã§ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«LLMãŒWebæ¤œç´¢ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºãã†ã¨ã—ã¾ã—ãŸãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚

Limitationã«ã‹ã‹ã‚Œã¦ã„ã¾ã—ãŸãŒã€Web Searchã¯ä½¿ãˆã¾ã›ã‚“ã€‚ï¼ˆã“ã®æ™‚ç‚¹ã§å¿œç”¨æ€§ãŒãã“ã¾ã§ãªã•ãã†ã ã£ãŸã®ã§æ¤œè¨¼ã‚’ã‚„ã‚ã¾ã—ãŸã€‚ï¼‰

## claude-bridgeã®ä»•çµ„ã¿

`claude-bridge`ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ï¼š

1. **ãƒ—ãƒ­ãƒˆã‚³ãƒ«å¤‰æ›**: Claude Codeã¯Anthropicã®APIå½¢å¼ã§é€šä¿¡ã—ã¾ã™ãŒã€claude-bridgeãŒã“ã‚Œã‚’OpenAIäº’æ›å½¢å¼ã«å¤‰æ›
2. **ãƒ­ãƒ¼ã‚«ãƒ«LLMã¨ã®é€šä¿¡**: å¤‰æ›ã•ã‚ŒãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’Ollamaã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«é€ä¿¡
3. **ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›**: Ollamaã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’Claude Codeå½¢å¼ã«å¤‰æ›ã—ã¦è¿”å´

## åˆ©ç‚¹ã¨åˆ¶é™äº‹é …

### åˆ©ç‚¹

- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: ã™ã¹ã¦ã®å‡¦ç†ãŒãƒ­ãƒ¼ã‚«ãƒ«ã§å®Œçµ
- **ã‚³ã‚¹ãƒˆå‰Šæ¸›**: å¤–éƒ¨APIã®ä½¿ç”¨æ–™é‡‘ãŒä¸è¦
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šä¸è¦
- **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã§ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚‚ä½¿ç”¨å¯èƒ½

### åˆ¶é™äº‹é …

- **ãƒ„ãƒ¼ãƒ«æ©Ÿèƒ½**: Webæ¤œç´¢ã‚„ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãªã©ã®ä¸€éƒ¨ãƒ„ãƒ¼ãƒ«ãŒæ­£å¸¸ã«å‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚‹
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: Claudeæœ¬å®¶ã¨æ¯”è¼ƒã—ã¦å¿œç­”ç²¾åº¦ã‚„é€Ÿåº¦ã«å·®ãŒã‚ã‚‹å ´åˆãŒã‚ã‚‹
- **äº’æ›æ€§**: ã™ã¹ã¦ã®Claude Codeæ©Ÿèƒ½ãŒå®Œå…¨ã«äº’æ›ã™ã‚‹ã‚ã‘ã§ã¯ãªã„

Ref: [Limitation](https://github.com/badlogic/lemmy/tree/main/apps/claude-bridge#limitations)

> This is a glorified hack that pretends other models are Claude. Here's what breaks:
>
> Completely Broken:
>
> ğŸš« Token usage/cost reporting (Claude Code's displays will lie to you)
> ğŸš« Image uploads (drag/drop, paste, file paths - Claude Code expects Anthropic's servers)
> ğŸš« Input caching (Claude Code's prompt caching isn't implemented - enjoy higher costs!)
> ğŸš« Web search/fetch tools (Anthropic-specific magic)
> Somewhat Janky:
>
> ğŸ¤· Model-specific features don't translate (Claude's artifacts, GPT's reasoning modes)
> ğŸ¤· Thinking/reasoning output formatting differs between providers
> ğŸ¤· Error messages might be cryptic (provider auth failures won't surface clearly)
> ğŸ¤· Tool schemas get converted (JSON Schema â†” Zod) - usually works, sometimes doesn't
> ğŸ¤· Streaming behavior has subtle differences despite SSE format conversion

## ãã®ä»–ã®è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰

```bash
OPENAI_API_KEY=dummy claude-bridge openai qwen3:1.7b --baseURL http://localhost:11434/v1 --debug
```

### ä»–ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨

```bash
# ã‚ˆã‚Šå¤§ããªãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
ollama pull llama3.2:3b
OPENAI_API_KEY=dummy claude-bridge openai llama3.2:3b --baseURL http://localhost:11434/v1
```

### OpenRouterã¨ã®é€£æº

```bash
claude-bridge openai gpt-4o --baseURL https://openrouter.ai/api/v1 --apiKey sk-or-your-key
```

## ã¾ã¨ã‚

`claude-bridge`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Claude Codeã¨ãƒ­ãƒ¼ã‚«ãƒ«LLMã‚’é€£æºã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚å®Œå…¨ãªäº’æ›æ€§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã¨ã‚Šã‚ãˆãšå‹•ã‹ã™ã“ã¨ã¯ã§ãã¾ã—ãŸã€‚
ã‚ã¾ã‚Šç”¨é€”ã¯ãªã•ãã†ã§ã™ãŒã€ä¸€æ—¦é€£æºã—ãŸãƒ¡ãƒ¢ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚


## å‚è€ƒãƒªãƒ³ã‚¯

- [Ollamaå…¬å¼ã‚µã‚¤ãƒˆ](https://ollama.com/)
- [Claude Codeå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.anthropic.com/en/docs/build-with-claude/claude-code)
- [claude-bridge GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/badlogic/lemmy/tree/main/apps/claude-bridge)
- [npm: @mariozechner/claude-bridge](https://www.npmjs.com/package/@mariozechner/claude-bridge)

