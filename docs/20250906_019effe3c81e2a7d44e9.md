---
title: [ClaudeCode] Slash commandを忘れないようにする工夫
tags: ClaudeCode slash_command
author: nakamasato
slide: false
---
## はじめに

Claude Codeを使った開発において、Slash commandは作業の自動化と標準化に非常に有効な機能です。しかし、せっかくProjectに定義しておいても、実際の開発中には忘れてしまい、手動で作業したり、直接Claude Codeに指示を出してしまうことがよくあります。

本記事では、この問題を解決するための実践的な工夫を紹介します。

## 課題：Slash commandの存在を忘れてしまう

### よくある問題

- 定義済みのSlash commandがあるのに、手動またはClaude Codeに直接指示を出して作業をしてしまう
- チーム開発で作業手順の一貫性が保てなくなる
- 「このSlash commandを使ってください」という余計なやりとりが発生する

### なぜ忘れてしまうのか

1. **可視性の問題**: `.claude/commands`ディレクトリにあるコマンドは、普段の開発フローでは目に入りにくい
2. **習慣の問題**: 既存の作業習慣から抜け出せず、つい手動またはClaude Codeに直接指示して作業してしまう
3. **認知負荷**: どのコマンドがどの作業に対応するか覚えきれない

## 解決策1: CLAUDE.mdでの明示的な指示

### 概要

プロジェクトルートの`CLAUDE.md`ファイルに、Claude Codeが作業を行う際にSlash commandを優先的に使用するよう明示的に指示を記載します。

### 実装例

```markdown
# Project Instructions for Claude Code

## 重要: Slash Commandの使用について

このプロジェクトでは、以下の作業を行う際は必ず対応するSlash commandを使用してください：

### 利用可能なSlash Commands

- `/gh-create-repo` - 新しいGitHubリポジトリを作成
- `/add-component` - 新しいReactコンポーネントを追加
- `/setup-test` - テスト環境をセットアップ
- `/update-deps` - 依存関係を更新

### ルール

1. 上記の作業に該当する指示を受けた場合、まず対応するSlash commandの存在を確認する
2. Slash commandが存在する場合は、それを使用することを提案する
3. 手動での作業は、Slash commandが存在しない場合のみ行う

例：
- ❌ "新しいコンポーネントを作って" → 手動でファイル作成
- ✅ "新しいコンポーネントを作って" → `/add-component`コマンドを提案
```

### メリット

- Claude Codeが常に参照する`CLAUDE.md`に記載することで、確実に認識される
- プロジェクト固有のルールとして定義できる
- 新しいメンバーがプロジェクトに参加した際も、すぐにルールを把握できる

## 解決策2: GitHub Actionsによる自動チェック

### 概要

Pull Request作成時に、GitHub Actionsを使って自動的にSlash commandの使用可能性をチェックし、使い忘れがあれば通知します。

### 実装

`.github/workflows/check-slash-command.yml`:

```yaml
name: Check Slash Command Usage

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  check-available-slash-command:
    runs-on: ubuntu-latest
    if: github.event_name == 'pull_request'
    permissions:
      contents: read
      pull-requests: write
      actions: read
    steps:
      - name: Checkout
        uses: actions/checkout@v5

      - name: claude code base action
        uses: anthropics/claude-code-base-action@beta
        with:
          timeout_minutes: 3
          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
          allowed_tools: "Bash,Grep,Glob,Read,Write,Edit,MultiEdit,LS,Task,TodoRead,TodoWrite,WebSearch,WebFetch"
          claude_env: |
            GH_TOKEN: ${{ github.token }}
          prompt: |
            You are asked to check the pr #${{ github.event.number }} in the following steps:
            - Step1: Check if PR title has slash command in the format of "(by /<slash command name>)". e.g. (by /gh-create-repo)
                - If it has, your task is complete. Skip all the following steps and just exit.
                - Otherwise, proceed to the next step.
            - Step2: Check the changes from the PR title and description.
            - Step3: List all the slash command under .claude/commands directory and check if there is corresponding slash command.
                - If there is no corresponding slash command for the change, your task is done. Skip all the following steps and just exit.
                - If there is an available slash command for the change, proceed to the next step.
            - Step4: Leave a comment to the PR in the following format.
                ```
                When creating/deleting/importing/adding <resource>, please use `/<slash command name>` (check [.claude/commands/<slash command>.md](.claude/commands/<slash command>.md)).
                ```
```

### 動作フロー

1. PRが作成・編集されると自動的に起動
2. PRタイトルにSlash commandの使用が明記されているかチェック
3. 明記されていない場合、変更内容を分析
4. 利用可能なSlash commandがあればPRにコメントで通知

### セットアップ手順

1. GitHubリポジトリの Settings → Secrets and variables → Actions に移動
2. `CLAUDE_CODE_OAUTH_TOKEN` or `ANTHROPIC_API_KEY`を追加（Claude Code またはClaude Consoleから取得）


### Tips: PR タイトルの命名規則

GitHub Actionsでslash commandから作成された変更かどうかをわかりやすくするためにPRタイトルに つかったSlash Commandを入れてもらうようにしました。

```
feat: コンポーネント追加 (by /add-component)
fix: 依存関係の更新 (by /update-deps)
docs: README更新
```

メリット:

- Claude Code GitHub Actions内でSlash Commandを使用して作成されたPRか判定しやすくなる
- PR一覧で使用されたコマンドが一目でわかる
- レビュワーが作業方法を確認しやすい

## まとめ

Slash commandの使用を習慣化するには、技術的な仕組みだけでなく、チーム文化としての定着が重要です。本記事で紹介した方法を組み合わせることで、以下の効果が期待できます：

1. **自動化による負荷軽減**: GitHub Actionsによる自動チェックで、レビュー時の確認負荷を削減
2. **可視性の向上**: PRタイトルやCLAUDE.mdでの明示により、コマンドの存在が常に意識される
3. **一貫性の確保**: 標準化された作業手順により、品質の安定化

## 参考リンク

- [Claude Code Documentation](https://docs.anthropic.com/claude-code)
- [GitHub Actions - Claude Code Base Action](https://github.com/anthropics/claude-code-base-action)

